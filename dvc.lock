schema: '2.0'
stages:
  object_detection:
    cmd: python aerialimagesdetection/inference/detection.py
    deps:
    - path: YOLOv8/detection_model/weights/best.pt
      hash: md5
      md5: a1c8cc9125ecb74841f79631a3dac237
      size: 207513471
    - path: data/processed_data
      hash: md5
      md5: 6b1c66fe7936d84dd96137f686dccfdb.dir
      size: 12827159
      nfiles: 6
    - path: data/raw_data
      hash: md5
      md5: 17a76df3c166aaa6f4244351afa14fcc.dir
      size: 8539684
      nfiles: 6
    outs:
    - path: data/output/annotated_images
      hash: md5
      md5: 4ea463be4ea92150c76421b982b22f7a.dir
      size: 13180270
      nfiles: 12
    - path: data/output/objects.csv
      hash: md5
      md5: d78b3772bf519f521b7bbb41c64fbb4b
      size: 91452
  building_footprint:
    cmd: python aerialimagesdetection/inference/footprint.py
    deps:
    - path: data/raw_data
      hash: md5
      md5: e43cde372ee87338adcc5e317f2b44c2.dir
      size: 8539684
      nfiles: 6
    outs:
    - path: data/output/footprints.csv
      hash: md5
      md5: d41d8cd98f00b204e9800998ecf8427e
      size: 0
    - path: data/output/masked_images
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
  super_resolution:
    cmd: python aerialimagesdetection/inference/super_resolution.py
    deps:
    - path: data/raw_data
      hash: md5
      md5: e43cde372ee87338adcc5e317f2b44c2.dir
      size: 8539684
      nfiles: 6
    outs:
    - path: data/upscaled_data/
      hash: md5
      md5: e43cde372ee87338adcc5e317f2b44c2.dir
      size: 8539684
      nfiles: 6
  data_preparation:
    cmd: python aerialimagesdetection/training/data_preparation.py
    deps:
    - path: data/xView/images
      hash: md5
      md5: 933bfb1d055721ed89875614bbb6cc6d.dir
      size: 1227792473
      nfiles: 846
    - path: data/xView/xView_train.geojson
      hash: md5
      md5: 4a583147254201627285633c11cb600d
      size: 372241031
    outs:
    - path: data/xView/labels
      hash: md5
      md5: 29c22f1291a02d94a4d7e86061dcbfc1.dir
      size: 22414870
      nfiles: 824
  preprocessing:
    cmd: python aerialimagesdetection/inference/data_preprocessing.py
    deps:
    - path: data/raw_data
      hash: md5
      md5: 17a76df3c166aaa6f4244351afa14fcc.dir
      size: 8539684
      nfiles: 6
    outs:
    - path: data/processed_data
      hash: md5
      md5: 6b1c66fe7936d84dd96137f686dccfdb.dir
      size: 12827159
      nfiles: 6
  tiling:
    cmd: python aerialimagesdetection/training/tiling.py
    deps:
    - path: data/xView/images
      hash: md5
      md5: 933bfb1d055721ed89875614bbb6cc6d.dir
      size: 1227792473
      nfiles: 846
    - path: data/xView/labels
      hash: md5
      md5: 29c22f1291a02d94a4d7e86061dcbfc1.dir
      size: 22414870
      nfiles: 824
    outs:
    - path: data/xView/tiled
      hash: md5
      md5: 32500bc63d8893881853f033ff24e361.dir
      size: 721346100
      nfiles: 32257
  object_detection_training:
    cmd: python aerialimagesdetection/training/detection.py
    deps:
    - path: data/xView/tiled
      hash: md5
      md5: 32500bc63d8893881853f033ff24e361.dir
      size: 721346100
      nfiles: 32257
    - path: data/xView/xView.yaml
      hash: md5
      md5: f6e82999c3ac289036b8f632bbf8d697
      size: 855
    params:
      params.yaml:
        train:
          epochs: 50
          batch: 4
          imgsz: 640
          val: true
    outs:
    - path: YOLOv8/detection_model/weights/best.pt
      hash: md5
      md5: a1c8cc9125ecb74841f79631a3dac237
      size: 207513471
  footprint:
    cmd: python aerialimagesdetection/inference/footprint.py
    deps:
    - path: data/output/objects.csv
      hash: md5
      md5: d78b3772bf519f521b7bbb41c64fbb4b
      size: 91452
    - path: data/processed_data
      hash: md5
      md5: 6b1c66fe7936d84dd96137f686dccfdb.dir
      size: 12827159
      nfiles: 6
    params:
      params.yaml:
        objects_name:
        - Building
    outs:
    - path: data/output/masked_images
      hash: md5
      md5: a91a61b7ed9dc91974414db86f1a0116.dir
      size: 4480351
      nfiles: 10
